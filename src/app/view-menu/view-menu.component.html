<div class="menu-container" [class.dark-mode]="darkMode">
  <!-- Header -->
  <header class="menu-header">
    <h1 class="logo">ðŸ¥— NutriBite</h1>

    <div class="header-actions">
      <button (click)="toggleDarkMode()" class="theme-toggle"></button>
      <button class="cart-btn">
        Cart ({{ cartCount$ | async }})
      </button>
    </div>
  </header>

  <!-- Animated Search Bar -->
  <app-search-bar (searchChange)="onSearchChange($event)"></app-search-bar>

  <!-- Tag Filters -->
  <div class="filter">
    <button [class.active]="selectedTag === 'all'" (click)="filterByTag('all')">All</button>
    <button [class.active]="selectedTag === 'vegan'" (click)="filterByTag('vegan')">Vegan</button>
    <button [class.active]="selectedTag === 'vegetarian'" (click)="filterByTag('vegetarian')">Vegetarian</button>
    <button [class.active]="selectedTag === 'non-veg'" (click)="filterByTag('non-veg')">Non-Veg</button>
    <button [class.active]="selectedTag === 'gluten-free'" (click)="filterByTag('gluten-free')">Gluten-Free</button>
  </div>

  <!-- Menu Items Grid -->
  <div class="menu-grid">
    <div *ngFor="let item of filteredItems" class="card">
      <div class="thumb">
        <img
          [src]="getImageSrc(item)"
          [alt]="item.name"
          (error)="onImgError($event)"
        />
      </div>
      <h4>{{ item.name }}</h4>
      <p class="desc">{{ item.description }}</p>
      <div class="price">${{ item.price }}</div>

      <div class="row">
        <app-revolving-button
          text="Remove from Cart"
          icon="âˆ’"
          (buttonClick)="removeFromCart(item)"
        ></app-revolving-button>
        <span class="item-count">{{ item.count || 0 }}</span>
        <app-revolving-button
          text="Add to Cart"
          icon="+"
          (buttonClick)="addToCart(item)"
        ></app-revolving-button>
      </div>
    </div>
  </div>

  <!-- Footer with Pacman -->
  <footer class="menu-footer">
    <div class="footer-pacman">
      <app-pacman-loader></app-pacman-loader>
    </div>
    <p>Â© 2025 NutriBite. All rights reserved.</p>
  </footer>

</div>
